{% extends 'base.html' %}
{% block title %}Messages for {{ course.title }}{% endblock %}
{% block content %}
{% include 'components/navbar.html' %}
<div class="container" style="margin-top:40px;">
    <h2>Messages for {{ course.title }}</h2>
    {% for ann in announcements %}
    <div class="card mb-4">
        <div class="card-header">
            <strong>{{ ann.title }}</strong>
            <span class="text-muted">({{ ann.created_at.strftime('%b %d, %Y %I:%M %p') }})</span>
        </div>
        <div class="card-body">
            <div>{{ ann.message }}</div>
            {% if ann.replies.count() > 0 %}
            <ul class="list-group mt-3">
                {% for reply in ann.replies.order_by(CourseAnnouncementReply.created_at.desc()) %}
                <li class="list-group-item">
                    <span class="font-weight-bold">{{ reply.user.username }}:</span>
                    {{ reply.message }}
                    <small class="text-muted">{{ reply.created_at.strftime('%b %d, %Y %I:%M %p') }}</small>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-muted">No messages yet.</p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}